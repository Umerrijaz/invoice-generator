<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice Generator - Mobile Friendly</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        @page {
            size: A4;
            margin: 15mm;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
            padding: 10px;
            max-width: 210mm;
            margin: 0 auto;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        .header {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 3px solid #2c3e50;
            gap: 15px;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
            min-width: 250px;
        }

        .logo {
            width: 70px;
            height: 70px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            border: 2px solid #ddd;
            font-size: 24px;
            color: #3498db;
            font-weight: bold;
            flex-shrink: 0;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: block;
        }

        .logo-upload {
            display: none;
        }

        .logo-text {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }

        .logo-placeholder {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.7);
            color: white;
            font-size: 9px;
            text-align: center;
            padding: 3px;
            opacity: 0;
            transition: opacity 0.3s;
            font-weight: normal;
        }

        .logo:hover .logo-placeholder {
            opacity: 1;
        }

        .company-info h1 {
            color: #2c3e50;
            font-size: 18px;
            margin-bottom: 4px;
        }

        .company-info p {
            color: #7f8c8d;
            font-size: 12px;
            line-height: 1.3;
        }

        .invoice-title {
            text-align: right;
        }

        .invoice-title h2 {
            color: #2c3e50;
            font-size: 24px;
            margin-bottom: 5px;
        }

        .invoice-title p {
            color: #7f8c8d;
            font-size: 13px;
        }

        .input-section {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-bottom: 15px;
        }

        .input-group {
            margin-bottom: 0;
        }

        .input-group label {
            display: block;
            margin-bottom: 4px;
            color: #2c3e50;
            font-weight: 600;
            font-size: 13px;
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 13px;
            background: white;
        }

        .products-section {
            margin-bottom: 15px;
        }

        .products-section h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .table-container {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin-bottom: 10px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 100%;
        }

        th {
            background: #2c3e50;
            color: white;
            padding: 8px 5px;
            text-align: left;
            font-weight: 600;
            font-size: 12px;
            white-space: nowrap;
        }

        td {
            padding: 6px 5px;
            border-bottom: 1px solid #ecf0f1;
            vertical-align: middle;
        }

        td input {
            width: 100%;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 12px;
            min-width: 60px;
        }

        .product-name-input {
            min-width: 120px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: background 0.3s;
            width: 100%;
        }

        .btn-add {
            background: #27ae60;
            color: white;
            margin-bottom: 10px;
        }

        .btn-add:hover {
            background: #229954;
        }

        .btn-remove {
            background: #e74c3c;
            color: white;
            padding: 5px 8px;
            width: auto;
            font-size: 16px;
            line-height: 1;
            min-width: 28px;
        }

        .btn-remove:hover {
            background: #c0392b;
        }

        .summary {
            margin-top: 15px;
        }

        .summary-box {
            width: 100%;
            background: #ecf0f1;
            padding: 12px;
            border-radius: 4px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            font-size: 13px;
            gap: 10px;
        }

        .summary-row-label {
            flex: 1;
            text-align: left;
        }

        .summary-row-value {
            flex: 1;
            text-align: right;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 5px;
        }

        .summary-row input {
            width: 90px;
            text-align: right;
            padding: 5px 6px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 13px;
        }

        .summary-row.total {
            border-top: 2px solid #2c3e50;
            padding-top: 10px;
            margin-top: 10px;
            font-size: 15px;
            font-weight: bold;
            color: #2c3e50;
        }

        .summary-row.balance-due {
            font-size: 15px;
            font-weight: bold;
            color: #e74c3c;
            background: #ffe5e5;
            padding: 8px;
            margin: 8px -12px -12px -12px;
            border-radius: 0 0 4px 4px;
        }

        .note-section {
            margin-top: 15px;
            padding: 10px;
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            border-radius: 4px;
        }

        .note-section h4 {
            color: #856404;
            margin-bottom: 5px;
            font-size: 12px;
        }

        .note-section p {
            color: #856404;
            font-size: 11px;
            line-height: 1.4;
        }

        .terms-section {
            margin-top: 15px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 4px;
        }

        .terms-section h4 {
            color: #495057;
            margin-bottom: 8px;
            font-size: 13px;
            font-weight: 600;
        }

        .terms-section h5 {
            color: #6c757d;
            margin-top: 8px;
            margin-bottom: 4px;
            font-size: 11px;
            font-weight: 600;
        }

        .terms-section p,
        .terms-section ul {
            color: #868e96;
            font-size: 10px;
            line-height: 1.4;
            margin-bottom: 4px;
        }

        .terms-section ul {
            margin-left: 16px;
            margin-top: 3px;
        }

        .terms-section li {
            margin-bottom: 2px;
        }

        .actions {
            margin-top: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .btn-pdf {
            background: #3498db;
            color: white;
        }

        .btn-pdf:hover {
            background: #2980b9;
        }

        /* Hide GitHub badge and any other floating elements always */
        [class*="github"], [class*="badge"], [id*="github"], [id*="badge"],
        .github-corner, #github-corner, a[href*="github.com"] img {
            display: none !important;
            visibility: hidden !important;
        }

        @media (min-width: 600px) {
            body {
                padding: 20px;
            }

            .container {
                padding: 25px;
            }

            .input-section {
                grid-template-columns: 1fr 1fr;
            }

            .btn-add {
                width: auto;
            }
        }

        @media print {
            @page {
                size: A4;
                margin: 8mm;
            }
            
            body {
                background: white;
                padding: 0;
                width: 100%;
                max-width: none;
            }
            
            .container {
                box-shadow: none;
                padding: 8px;
                max-width: none;
            }
            
            .actions, .btn-add, .btn-remove, .logo-placeholder {
                display: none !important;
            }
            
            /* Hide page URL and date in print footer/header */
            @page {
                margin: 8mm;
                @bottom-left {
                    content: none;
                }
                @bottom-right {
                    content: none;
                }
                @bottom-center {
                    content: none;
                }
                @top-left {
                    content: none;
                }
                @top-right {
                    content: none;
                }
                @top-center {
                    content: none;
                }
            }
            
            input, select {
                border: none !important;
                background: transparent !important;
                -webkit-appearance: none;
                appearance: none;
                padding: 2px !important;
            }
            
            input[type="date"] {
                color: #7f8c8d;
            }
            
            .table-container {
                overflow: visible;
            }
            
            /* Compact everything to fit on one page */
            .header {
                margin-bottom: 6px;
                padding-bottom: 6px;
            }
            
            .logo {
                width: 45px;
                height: 45px;
                font-size: 18px;
                border-radius: 6px;
            }
            
            .logo img {
                object-fit: contain;
            }
            
            .company-info h1 {
                font-size: 14px;
                margin-bottom: 2px;
            }
            
            .company-info p {
                font-size: 9px;
                line-height: 1.2;
            }
            
            .invoice-title h2 {
                font-size: 18px;
                margin-bottom: 3px;
            }
            
            .invoice-title p {
                font-size: 10px;
            }
            
            .input-section {
                margin-bottom: 6px;
                gap: 5px;
            }
            
            .input-group {
                margin-bottom: 0;
            }
            
            .input-group label {
                font-size: 9px;
                margin-bottom: 2px;
            }
            
            .input-group input, .input-group select {
                font-size: 9px;
                padding: 2px;
            }
            
            .products-section {
                margin-bottom: 6px;
            }
            
            .products-section h3 {
                font-size: 12px;
                margin-bottom: 5px;
            }
            
            th {
                padding: 4px 3px;
                font-size: 9px;
            }
            
            td {
                padding: 3px 3px;
                font-size: 9px;
            }
            
            td input {
                font-size: 9px;
                padding: 1px 2px;
            }
            
            .summary {
                margin-top: 6px;
            }
            
            .summary-box {
                padding: 6px;
            }
            
            .summary-row {
                font-size: 9px;
                margin-bottom: 3px;
            }
            
            .summary-row input {
                font-size: 9px;
                padding: 1px 3px;
                width: 70px;
            }
            
            .summary-row.total {
                font-size: 11px;
                padding-top: 5px;
                margin-top: 5px;
            }
            
            .summary-row.balance-due {
                font-size: 11px;
                padding: 5px;
                margin: 5px -6px -6px -6px;
            }
            
            .note-section {
                margin-top: 6px;
                padding: 6px;
            }
            
            .note-section h4 {
                font-size: 9px;
                margin-bottom: 3px;
            }
            
            .note-section p {
                font-size: 8px;
                line-height: 1.2;
            }
            
            .terms-section {
                margin-top: 6px;
                padding: 6px;
            }
            
            .terms-section h4 {
                font-size: 10px;
                margin-bottom: 4px;
            }
            
            .terms-section h5 {
                font-size: 9px;
                margin-top: 4px;
                margin-bottom: 2px;
            }
            
            .terms-section p,
            .terms-section ul {
                font-size: 8px;
                line-height: 1.3;
                margin-bottom: 2px;
            }
            
            .terms-section ul {
                margin-left: 12px;
                margin-top: 2px;
            }
            
            .terms-section li {
                margin-bottom: 1px;
            }
            
            /* Hide GitHub badge and any other floating elements */
            [class*="github"], [class*="badge"], [id*="github"], [id*="badge"],
            .github-corner, #github-corner, a[href*="github.com"] img {
                display: none !important;
                visibility: hidden !important;
            }
        }
    </style>
</head>
<body>
    <div class="container" id="invoice">
        <div class="header">
            <div class="logo-section">
                <div class="logo" onclick="document.getElementById('logoUpload').click()">
                    <div class="logo-text" id="logoText">ST</div>
                    <div class="logo-placeholder">üì∑ Upload Logo</div>
                </div>
                <input type="file" id="logoUpload" class="logo-upload" accept="image/*" onchange="handleLogoUpload(event)">
                <div class="company-info">
                    <h1>Shop Turkey</h1>
                    <p>Faisalabad, Pakistan</p>
                    <p>Instagram:_shopturkey</p>
                </div>
            </div>
            <div class="invoice-title">
                <h2>INVOICE</h2>
                <p>Date: <input type="date" id="invoiceDate" style="border: 1px solid #ddd; padding: 5px; border-radius: 4px; font-size: 13px;"></p>
            </div>
        </div>

        <div class="input-section">
            <div class="input-group">
                <label>Customer Name:</label>
                <input type="text" id="customerName" placeholder="Enter customer name">
            </div>
            <div class="input-group">
                <label>Customer Phone:</label>
                <input type="text" id="customerPhone" placeholder="Enter phone number">
            </div>
            <div class="input-group">
                <label>Customer Address:</label>
                <input type="text" id="customerAddress" placeholder="Enter customer address">
            </div>
            <div class="input-group">
                <label>Payment Method:</label>
                <select id="paymentMethod" onchange="calculateTotal()">
                    <option value="Cash on Delivery">Cash on Delivery</option>
                    <option value="Advance Payment">Advance Payment</option>
                    <option value="Bank Transfer">Bank Transfer</option>
                </select>
            </div>
        </div>

        <div class="products-section">
            <h3>Products</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th style="width: 40%">Product Name</th>
                            <th style="width: 15%">Qty</th>
                            <th style="width: 20%">Price</th>
                            <th style="width: 20%">Total</th>
                            <th style="width: 5%"></th>
                        </tr>
                    </thead>
                    <tbody id="productsTable">
                        <tr>
                            <td><input type="text" class="product-name product-name-input" placeholder="Product name"></td>
                            <td><input type="number" class="quantity" value="1" min="1" onchange="calculateTotal()"></td>
                            <td><input type="number" class="price" value="0" min="0" onchange="calculateTotal()"></td>
                            <td><input type="number" class="item-total" value="0" readonly></td>
                            <td><button class="btn btn-remove" onclick="removeRow(this)">√ó</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <button class="btn btn-add" onclick="addRow()">+ Add Product</button>
        </div>

        <div class="summary">
            <div class="summary-box">
                <div class="summary-row">
                    <span class="summary-row-label">Subtotal:</span>
                    <span class="summary-row-value">PKR <span id="subtotal">0.00</span></span>
                </div>
                <div class="summary-row">
                    <span class="summary-row-label">Delivery Charges:</span>
                    <span class="summary-row-value">
                        PKR <input type="number" id="deliveryCharges" value="0" min="0" onchange="calculateTotal()">
                    </span>
                </div>
                <div class="summary-row" id="codTaxRow" style="display: none;">
                    <span class="summary-row-label">COD Tax (4%):</span>
                    <span class="summary-row-value">PKR <span id="codTax">0.00</span></span>
                </div>
                <div class="summary-row">
                    <span class="summary-row-label">Discount:</span>
                    <span class="summary-row-value">
                        PKR <input type="number" id="discount" value="0" min="0" onchange="calculateTotal()">
                    </span>
                </div>
                <div class="summary-row total">
                    <span class="summary-row-label">TOTAL:</span>
                    <span class="summary-row-value">PKR <span id="total">0.00</span></span>
                </div>
                <div class="summary-row">
                    <span class="summary-row-label">Amount Paid:</span>
                    <span class="summary-row-value">
                        PKR <input type="number" id="amountPaid" value="0" min="0" onchange="calculateTotal()">
                    </span>
                </div>
                <div class="summary-row balance-due">
                    <span class="summary-row-label">BALANCE DUE:</span>
                    <span class="summary-row-value">PKR <span id="balanceDue">0.00</span></span>
                </div>
            </div>
        </div>

        <div class="note-section">
            <h4>‚ö†Ô∏è Important Note:</h4>
            <p>Please make a video while opening the package so we can file claims in case of damaged or lost items.</p>
        </div>

        <div class="terms-section">
            <h4>Terms & Conditions</h4>
            
            <h5>Payment Policy</h5>
            <ul>
                <li>Our primary payment method is online bank transfer only.</li>
                <li>Preorders: A 50% advance payment via bank transfer is required to confirm the order.</li>
                <li>In-stock items: Full payment via bank transfer is required.</li>
                <li>Cash on Delivery (COD): Available on limited items only.</li>
                <li>A 4% tax is applicable on all Cash on Delivery parcels.</li>
            </ul>

            <h5>Delivery Timeline</h5>
            <ul>
                <li>In-stock items: Estimated delivery time is 2‚Äì7 working days.</li>
                <li>Preorders: Estimated delivery time is 2‚Äì4 weeks.</li>
                <li>Please note: Exact delivery dates cannot be guaranteed as delays may occur due to customs clearance.</li>
            </ul>

            <h5>Cancellations & Refunds</h5>
            <ul>
                <li>In case of order cancellation after the return period has passed, the advance payment is non-refundable.</li>
            </ul>

            <h5>Sizing & Specifications</h5>
            <ul>
                <li>Sizes, measurements, shades, and similar specifications are not our responsibility.</li>
                <li>No refunds or exchanges will be accommodated on the basis of sizing or similar concerns.</li>
            </ul>
        </div>

        <div class="actions">
            <button class="btn btn-pdf" onclick="generatePDF()">Save as PDF</button>
        </div>
    </div>
    
    <script>
        // Set today's date in the date input
        const today = new Date();
        const dateStr = today.toISOString().split('T')[0];
        document.getElementById('invoiceDate').value = dateStr;

        function handleLogoUpload(event) {
            const file = event.target.files[0];
            if (file && file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const logo = document.querySelector('.logo');
                    const logoText = document.getElementById('logoText');
                    
                    // Hide the text
                    logoText.style.display = 'none';
                    
                    // Remove any existing image
                    const existingImg = logo.querySelector('img');
                    if (existingImg) {
                        existingImg.remove();
                    }
                    
                    // Create and add new image
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.alt = 'Company Logo';
                    
                    // Insert image before logoText to maintain proper structure
                    logo.insertBefore(img, logoText);
                    
                    // Store the image data in localStorage for persistence
                    try {
                        localStorage.setItem('invoiceLogo', e.target.result);
                    } catch (error) {
                        console.log('Could not save logo to localStorage');
                    }
                };
                reader.readAsDataURL(file);
            }
        }

        // Load saved logo on page load
        window.addEventListener('DOMContentLoaded', function() {
            try {
                const savedLogo = localStorage.getItem('invoiceLogo');
                if (savedLogo) {
                    const logo = document.querySelector('.logo');
                    const logoText = document.getElementById('logoText');
                    logoText.style.display = 'none';
                    
                    const img = document.createElement('img');
                    img.src = savedLogo;
                    img.alt = 'Company Logo';
                    logo.insertBefore(img, logoText);
                }
            } catch (error) {
                console.log('Could not load saved logo');
            }
        });

        function addRow() {
            const table = document.getElementById('productsTable');
            const newRow = table.insertRow();
            newRow.innerHTML = `
                <td><input type="text" class="product-name product-name-input" placeholder="Product name"></td>
                <td><input type="number" class="quantity" value="1" min="1" onchange="calculateTotal()"></td>
                <td><input type="number" class="price" value="0" min="0" onchange="calculateTotal()"></td>
                <td><input type="number" class="item-total" value="0" readonly></td>
                <td><button class="btn btn-remove" onclick="removeRow(this)">√ó</button></td>
            `;
            calculateTotal();
        }

        function removeRow(button) {
            const table = document.getElementById('productsTable');
            if (table.rows.length > 1) {
                button.parentElement.parentElement.remove();
                calculateTotal();
            }
        }

        function calculateTotal() {
            const rows = document.querySelectorAll('#productsTable tr');
            let subtotal = 0;

            rows.forEach(row => {
                const quantity = parseFloat(row.querySelector('.quantity').value) || 0;
                const price = parseFloat(row.querySelector('.price').value) || 0;
                const itemTotal = quantity * price;
                row.querySelector('.item-total').value = itemTotal.toFixed(2);
                subtotal += itemTotal;
            });

            const deliveryCharges = parseFloat(document.getElementById('deliveryCharges').value) || 0;
            const discountAmount = parseFloat(document.getElementById('discount').value) || 0;
            const paymentMethod = document.getElementById('paymentMethod').value;
            
            let codTax = 0;
            const codTaxRow = document.getElementById('codTaxRow');
            
            if (paymentMethod === 'Cash on Delivery') {
                codTax = (subtotal + deliveryCharges - discountAmount) * 0.04;
                codTaxRow.style.display = 'flex';
                document.getElementById('codTax').textContent = codTax.toFixed(2);
            } else {
                codTaxRow.style.display = 'none';
            }
            
            const amountPaid = parseFloat(document.getElementById('amountPaid').value) || 0;
            const total = subtotal + deliveryCharges - discountAmount + codTax;
            const balanceDue = total - amountPaid;

            document.getElementById('subtotal').textContent = subtotal.toFixed(2);
            document.getElementById('total').textContent = total.toFixed(2);
            document.getElementById('balanceDue').textContent = balanceDue.toFixed(2);
        }

        function generatePDF() {
            // Add CSS to hide print headers/footers
            const style = document.createElement('style');
            style.textContent = `
                @page { margin: 0; }
                body { margin: 8mm; }
            `;
            document.head.appendChild(style);
            
            // Trigger print
            window.print();
            
            // Remove the style after print dialog closes
            setTimeout(() => {
                document.head.removeChild(style);
            }, 1000);
        }

        calculateTotal();
    </script>
</body>
</html>
