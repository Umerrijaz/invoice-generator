<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>Shop Turkey Invoice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: #f0f0f0;
            padding: 20px;
        }

        .invoice-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        /* HEADER */
        .invoice-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            padding-bottom: 20px;
            border-bottom: 3px solid #333;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .company-details {
            display: flex;
            gap: 15px;
            align-items: center;
            flex: 1;
        }

        .logo-circle {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: 2px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: #3498db;
            background: white;
            flex-shrink: 0;
        }

        .logo-circle img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
        }

        .company-text h1 {
            font-size: 20px;
            margin-bottom: 5px;
            color: #333;
        }

        .company-text p {
            font-size: 12px;
            color: #666;
            margin: 2px 0;
        }

        .invoice-info {
            text-align: right;
            width: 100%;
        }
        
        @media screen and (min-width: 600px) {
            .invoice-info {
                width: auto;
            }
        }

        .invoice-info h2 {
            font-size: 28px;
            margin-bottom: 10px;
            color: #333;
        }

        .date-row {
            display: flex;
            gap: 10px;
            align-items: center;
            justify-content: flex-end;
        }

        .date-row label {
            font-size: 14px;
            font-weight: bold;
            color: #666;
        }

        .date-row input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        /* CUSTOMER INFO */
        .customer-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-field {
            display: flex;
            flex-direction: column;
        }

        .form-field label {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 13px;
            color: #333;
        }

        .form-field input,
        .form-field select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            font-family: inherit;
        }

        /* For mobile - prevent zoom */
        @media screen and (max-width: 600px) {
            .form-field input,
            .form-field select {
                font-size: 16px;
            }
            
            .customer-section {
                grid-template-columns: 1fr;
            }
        }

        /* PRODUCTS TABLE */
        .products-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .products-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 10px;
        }

        .products-table thead {
            background: #333;
            color: white;
        }

        .products-table th {
            padding: 8px;
            text-align: left;
            font-weight: bold;
            font-size: 12px;
        }

        .products-table td {
            padding: 6px 8px;
            border-bottom: 1px solid #eee;
        }

        .products-table input {
            width: 100%;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 3px;
            font-size: 12px;
        }

        .remove-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 5px 8px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }

        .add-product-btn {
            background: #27ae60;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        /* SUMMARY */
        .summary-box {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 15px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 13px;
            align-items: center;
        }

        .summary-row label {
            font-weight: 500;
            color: #333;
        }

        .summary-row .value {
            font-weight: bold;
            color: #333;
        }

        .summary-row input {
            width: 100px;
            padding: 5px 8px;
            border: 1px solid #ddd;
            border-radius: 3px;
            text-align: right;
            font-size: 13px;
        }

        .total-row {
            border-top: 2px solid #333;
            padding-top: 8px;
            margin-top: 8px;
            font-size: 15px;
            font-weight: bold;
        }

        .balance-row {
            background: #ffe5e5;
            margin: 10px -15px -15px -15px;
            padding: 10px 15px;
            border-radius: 0 0 5px 5px;
            font-size: 15px;
            font-weight: bold;
            color: #e74c3c;
        }

        /* NOTES & TERMS */
        .note-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 4px;
        }

        .note-box h4 {
            font-size: 12px;
            margin-bottom: 5px;
            color: #856404;
        }

        .note-box p {
            font-size: 11px;
            line-height: 1.5;
            color: #856404;
        }

        .terms-box {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 15px;
        }

        .terms-box h4 {
            font-size: 13px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
            border-bottom: 2px solid #dee2e6;
            padding-bottom: 5px;
        }

        .terms-box h5 {
            font-size: 10px;
            font-weight: bold;
            margin-top: 8px;
            margin-bottom: 4px;
            color: #495057;
            text-transform: uppercase;
        }

        .terms-box ul {
            margin-left: 16px;
            margin-bottom: 5px;
        }

        .terms-box li {
            font-size: 9px;
            line-height: 1.5;
            color: #6c757d;
            margin-bottom: 3px;
        }

        /* ACTION BUTTONS */
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .print-btn {
            flex: 1;
            background: #3498db;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }

        .upload-logo-btn {
            background: #9b59b6;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        /* PRINT STYLES - CRITICAL FOR MOBILE */
        @media print {
            @page {
                size: A4 portrait;
                margin: 8mm;
            }

            html, body {
                background: white !important;
                padding: 0 !important;
                margin: 0 !important;
                width: 210mm !important;
                height: 297mm !important;
            }

            body {
                print-color-adjust: exact !important;
                -webkit-print-color-adjust: exact !important;
            }

            .invoice-container {
                max-width: 100% !important;
                box-shadow: none !important;
                padding: 0 !important;
                margin: 0 !important;
                page-break-after: avoid !important;
                page-break-inside: avoid !important;
            }

            /* CRITICAL: Keep header visible */
            .invoice-header {
                display: flex !important;
                visibility: visible !important;
                opacity: 1 !important;
                margin-bottom: 4mm !important;
                padding-bottom: 3mm !important;
                page-break-inside: avoid !important;
                page-break-after: avoid !important;
            }

            .company-details {
                display: flex !important;
                visibility: visible !important;
            }

            .logo-circle {
                display: flex !important;
                visibility: visible !important;
                width: 45px !important;
                height: 45px !important;
                font-size: 18px !important;
            }

            .company-text {
                display: block !important;
                visibility: visible !important;
            }

            .company-text h1 {
                font-size: 14px !important;
                margin-bottom: 2mm !important;
            }

            .company-text p {
                font-size: 9px !important;
                line-height: 1.3 !important;
            }

            .invoice-info {
                display: block !important;
                visibility: visible !important;
            }

            .invoice-info h2 {
                font-size: 18px !important;
                margin-bottom: 2mm !important;
            }

            .date-row {
                display: flex !important;
                font-size: 9px !important;
            }

            /* Hide buttons */
            .action-buttons,
            .add-product-btn,
            .remove-btn,
            .upload-logo-btn,
            input[type="file"] {
                display: none !important;
            }

            /* Make inputs look like text */
            input,
            select {
                border: none !important;
                background: transparent !important;
                padding: 0 !important;
                font-weight: inherit !important;
            }

            /* Compact spacing to fit on one page */
            .customer-section {
                margin-bottom: 3mm !important;
                gap: 2mm !important;
                page-break-inside: avoid !important;
            }

            .form-field label {
                font-size: 9px !important;
                margin-bottom: 1mm !important;
            }

            .form-field input,
            .form-field select {
                font-size: 9px !important;
            }

            .products-title {
                font-size: 11px !important;
                margin-bottom: 2mm !important;
            }

            .products-table th {
                font-size: 9px !important;
                padding: 2mm 1.5mm !important;
            }

            .products-table td {
                font-size: 9px !important;
                padding: 1.5mm 1.5mm !important;
            }

            .summary-box {
                padding: 3mm !important;
                margin-bottom: 3mm !important;
                page-break-inside: avoid !important;
            }

            .summary-row {
                font-size: 9px !important;
                margin-bottom: 1.5mm !important;
            }

            .summary-row input {
                font-size: 9px !important;
            }

            .total-row {
                font-size: 11px !important;
                padding-top: 2mm !important;
                margin-top: 2mm !important;
            }

            .balance-row {
                font-size: 11px !important;
                padding: 2mm 3mm !important;
                margin: 2mm -3mm -3mm -3mm !important;
            }

            .note-box {
                padding: 2.5mm !important;
                margin-bottom: 3mm !important;
                page-break-inside: avoid !important;
            }

            .note-box h4 {
                font-size: 9px !important;
                margin-bottom: 1mm !important;
            }

            .note-box p {
                font-size: 8px !important;
                line-height: 1.4 !important;
            }

            .terms-box {
                padding: 3mm !important;
                margin-bottom: 0 !important;
                page-break-inside: avoid !important;
            }

            .terms-box h4 {
                font-size: 10px !important;
                margin-bottom: 2mm !important;
                padding-bottom: 1mm !important;
            }

            .terms-box h5 {
                font-size: 8px !important;
                margin-top: 2mm !important;
                margin-bottom: 1mm !important;
            }

            .terms-box li {
                font-size: 7.5px !important;
                line-height: 1.4 !important;
                margin-bottom: 0.5mm !important;
            }

            .terms-box ul {
                margin-left: 12px !important;
                margin-bottom: 1mm !important;
            }
        }
    </style>
</head>
<body>
    <div class="invoice-container">
        <!-- HEADER -->
        <div class="invoice-header">
            <div class="company-details">
                <div class="logo-circle" id="logoCircle">ST</div>
                <input type="file" id="logoInput" accept="image/*" style="display: none;">
                <button class="upload-logo-btn" onclick="document.getElementById('logoInput').click()">Upload Logo</button>
                <div class="company-text">
                    <h1>Shop Turkey</h1>
                    <p>Faisalabad, Pakistan</p>
                    <p>Instagram: _shopturkey</p>
                </div>
            </div>
            <div class="invoice-info">
                <h2>INVOICE</h2>
                <div class="date-row">
                    <label>Date:</label>
                    <input type="date" id="invoiceDate">
                </div>
            </div>
        </div>

        <!-- CUSTOMER INFO -->
        <div class="customer-section">
            <div class="form-field">
                <label>Customer Name:</label>
                <input type="text" id="customerName" placeholder="Enter customer name">
            </div>
            <div class="form-field">
                <label>Customer Phone:</label>
                <input type="text" id="customerPhone" placeholder="Enter phone number">
            </div>
            <div class="form-field">
                <label>Customer Address:</label>
                <input type="text" id="customerAddress" placeholder="Enter address">
            </div>
            <div class="form-field">
                <label>Payment Method:</label>
                <select id="paymentMethod">
                    <option value="Cash on Delivery">Cash on Delivery</option>
                    <option value="Advance Payment">Advance Payment</option>
                    <option value="Bank Transfer">Bank Transfer</option>
                </select>
            </div>
        </div>

        <!-- PRODUCTS -->
        <div class="products-title">Products</div>
        <table class="products-table">
            <thead>
                <tr>
                    <th style="width: 45%">Product Name</th>
                    <th style="width: 15%">Qty</th>
                    <th style="width: 18%">Price</th>
                    <th style="width: 18%">Total</th>
                    <th style="width: 4%"></th>
                </tr>
            </thead>
            <tbody id="productsBody">
                <tr>
                    <td><input type="text" class="product-name" placeholder="Product name"></td>
                    <td><input type="number" class="qty" value="1" min="1"></td>
                    <td><input type="number" class="price" value="0" min="0"></td>
                    <td><input type="number" class="total" value="0" readonly></td>
                    <td><button class="remove-btn" onclick="removeProduct(this)">√ó</button></td>
                </tr>
            </tbody>
        </table>
        <button class="add-product-btn" onclick="addProduct()">+ Add Product</button>

        <!-- SUMMARY -->
        <div class="summary-box">
            <div class="summary-row">
                <label>Subtotal:</label>
                <span class="value">PKR <span id="subtotal">0.00</span></span>
            </div>
            <div class="summary-row">
                <label>Delivery Charges:</label>
                <span class="value">PKR <input type="number" id="delivery" value="0" min="0"></span>
            </div>
            <div class="summary-row" id="codTaxRow" style="display: none;">
                <label>COD Tax (4%):</label>
                <span class="value">PKR <span id="codTax">0.00</span></span>
            </div>
            <div class="summary-row">
                <label>Discount:</label>
                <span class="value">PKR <input type="number" id="discount" value="0" min="0"></span>
            </div>
            <div class="summary-row total-row">
                <label>TOTAL:</label>
                <span class="value">PKR <span id="totalAmount">0.00</span></span>
            </div>
            <div class="summary-row">
                <label>Amount Paid:</label>
                <span class="value">PKR <input type="number" id="paid" value="0" min="0"></span>
            </div>
            <div class="summary-row balance-row">
                <label>BALANCE DUE:</label>
                <span class="value">PKR <span id="balance">0.00</span></span>
            </div>
        </div>

        <!-- NOTE -->
        <div class="note-box">
            <h4>‚ö†Ô∏è Important Note:</h4>
            <p>Please make a video while opening the package so we can file claims in case of damaged or lost items.</p>
        </div>

        <!-- TERMS -->
        <div class="terms-box">
            <h4>Terms & Conditions</h4>
            
            <h5>Payment Policy</h5>
            <ul>
                <li>Our primary payment method is online bank transfer only.</li>
                <li>Preorders: A 50% advance payment via bank transfer is required to confirm the order.</li>
                <li>In-stock items: Full payment via bank transfer is required.</li>
                <li>Cash on Delivery (COD): Available on limited items only.</li>
                <li>A 4% tax is applicable on all Cash on Delivery parcels.</li>
            </ul>

            <h5>Delivery Timeline</h5>
            <ul>
                <li>In-stock items: Estimated delivery time is 2‚Äì7 working days.</li>
                <li>Preorders: Estimated delivery time is 2‚Äì4 weeks.</li>
                <li>Please note: Exact delivery dates cannot be guaranteed as delays may occur due to customs clearance.</li>
            </ul>

            <h5>Cancellations & Refunds</h5>
            <ul>
                <li>In case of order cancellation after the return period has passed, the advance payment is non-refundable.</li>
            </ul>

            <h5>Sizing & Specifications</h5>
            <ul>
                <li>Sizes, measurements, shades, and similar specifications are not our responsibility.</li>
                <li>No refunds or exchanges will be accommodated on the basis of sizing or similar concerns.</li>
            </ul>
        </div>

        <!-- ACTIONS -->
        <div class="action-buttons">
            <button class="print-btn" onclick="printInvoice()">üíæ Save as PDF</button>
        </div>
    </div>

    <script>
        // Set today's date
        document.getElementById('invoiceDate').value = new Date().toISOString().split('T')[0];

        // Logo upload
        document.getElementById('logoInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file && file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    const logoCircle = document.getElementById('logoCircle');
                    logoCircle.innerHTML = `<img src="${event.target.result}" alt="Logo">`;
                    localStorage.setItem('invoiceLogo', event.target.result);
                };
                reader.readAsDataURL(file);
            }
        });

        // Load saved logo
        const savedLogo = localStorage.getItem('invoiceLogo');
        if (savedLogo) {
            document.getElementById('logoCircle').innerHTML = `<img src="${savedLogo}" alt="Logo">`;
        }

        // Add product row
        function addProduct() {
            const tbody = document.getElementById('productsBody');
            const row = tbody.insertRow();
            row.innerHTML = `
                <td><input type="text" class="product-name" placeholder="Product name"></td>
                <td><input type="number" class="qty" value="1" min="1"></td>
                <td><input type="number" class="price" value="0" min="0"></td>
                <td><input type="number" class="total" value="0" readonly></td>
                <td><button class="remove-btn" onclick="removeProduct(this)">√ó</button></td>
            `;
            attachCalculators();
        }

        // Remove product row
        function removeProduct(btn) {
            if (document.querySelectorAll('#productsBody tr').length > 1) {
                btn.closest('tr').remove();
                calculate();
            }
        }

        // Attach event listeners
        function attachCalculators() {
            document.querySelectorAll('.qty, .price').forEach(input => {
                input.removeEventListener('input', calculate);
                input.addEventListener('input', calculate);
            });
            document.querySelectorAll('#delivery, #discount, #paid, #paymentMethod').forEach(input => {
                input.removeEventListener('input', calculate);
                input.removeEventListener('change', calculate);
                input.addEventListener('input', calculate);
                input.addEventListener('change', calculate);
            });
        }

        // Calculate totals
        function calculate() {
            let subtotal = 0;
            
            document.querySelectorAll('#productsBody tr').forEach(row => {
                const qty = parseFloat(row.querySelector('.qty').value) || 0;
                const price = parseFloat(row.querySelector('.price').value) || 0;
                const total = qty * price;
                row.querySelector('.total').value = total.toFixed(2);
                subtotal += total;
            });

            const delivery = parseFloat(document.getElementById('delivery').value) || 0;
            const discount = parseFloat(document.getElementById('discount').value) || 0;
            const paymentMethod = document.getElementById('paymentMethod').value;
            
            let codTax = 0;
            if (paymentMethod === 'Cash on Delivery') {
                codTax = (subtotal + delivery - discount) * 0.04;
                document.getElementById('codTaxRow').style.display = 'flex';
                document.getElementById('codTax').textContent = codTax.toFixed(2);
            } else {
                document.getElementById('codTaxRow').style.display = 'none';
            }

            const total = subtotal + delivery - discount + codTax;
            const paid = parseFloat(document.getElementById('paid').value) || 0;
            const balance = total - paid;

            document.getElementById('subtotal').textContent = subtotal.toFixed(2);
            document.getElementById('totalAmount').textContent = total.toFixed(2);
            document.getElementById('balance').textContent = balance.toFixed(2);
        }

        // Print invoice
        function printInvoice() {
            window.print();
        }

        // Initialize
        attachCalculators();
        calculate();
    </script>
</body>
</html>
